import '@babel/polyfill';
import Neon, { wallet, api, u, sc, rpc, tx } from '@cityofzion/neon-js';
import * as _ from 'lodash';
import { scriptHash, privnetWif, localHost } from './blockchain/config';

const value = '66,90,104,57,49,65,89,38,83,89,87,105,88,224,0,0,223,223,128,0,16,74,247,100,80,57,163,92,128,191,255,255,224,80,4,222,116,75,213,163,110,118,44,221,135,118,208,144,136,134,160,73,85,63,255,34,170,159,255,170,170,127,254,149,84,15,253,85,0,24,63,216,170,143,252,96,0,0,0,0,0,3,0,37,52,38,132,104,130,158,74,170,127,251,85,84,255,245,85,63,242,170,127,250,170,159,254,170,167,254,170,128,193,254,170,127,234,168,255,213,80,37,50,35,83,72,210,98,158,154,76,149,80,15,255,74,168,255,213,80,195,253,84,63,213,71,255,170,168,52,208,34,97,17,61,69,84,255,211,197,85,63,242,84,255,74,159,229,83,242,167,226,167,236,158,170,159,250,154,169,96,63,90,48,224,222,210,28,122,255,89,129,65,80,39,219,237,65,241,235,40,39,48,62,253,236,96,19,2,48,106,127,11,118,134,212,47,242,71,205,102,184,208,14,166,161,68,251,128,246,41,71,228,123,243,16,18,154,44,194,78,235,72,196,142,246,59,62,198,252,72,251,92,191,240,143,206,174,110,146,95,28,185,27,240,2,141,45,47,172,69,23,19,213,220,155,237,231,141,227,35,34,231,89,139,70,36,63,115,53,226,198,189,211,183,11,197,58,46,45,13,171,212,99,57,158,180,164,229,78,142,212,44,234,216,172,63,87,93,143,164,232,233,20,177,197,105,152,164,194,146,10,177,224,221,240,178,44,77,27,91,134,151,212,166,156,49,103,29,245,174,214,202,171,148,21,1,139,240,123,79,68,99,156,238,65,201,90,152,136,143,21,26,232,230,218,70,86,226,221,24,92,33,39,168,230,103,226,115,138,106,18,102,165,119,140,63,139,26,205,187,98,208,226,129,74,144,21,212,43,20,46,253,7,63,47,74,110,60,192,166,254,15,245,211,69,191,239,80,179,173,124,47,168,247,189,175,97,252,38,131,203,219,23,211,239,172,77,56,254,35,156,35,171,112,125,54,144,32,225,181,221,0,220,162,33,32,100,128,168,8,232,16,120,241,7,223,155,126,107,240,96,40,138,223,176,80,228,37,221,153,242,56,43,143,222,40,233,69,17,190,232,37,227,9,5,237,10,13,66,71,205,219,39,213,176,3,125,159,73,7,48,122,68,33,231,136,30,91,179,65,214,114,69,225,12,130,47,3,118,9,70,221,10,189,78,69,1,35,67,98,221,57,161,184,116,72,205,58,66,34,133,74,115,19,65,216,234,47,10,80,41,122,181,85,18,140,34,133,142,254,49,248,239,119,123,54,38,161,136,81,141,72,118,169,54,21,92,29,177,36,35,190,82,208,191,230,109,49,181,199,108,70,195,85,134,212,236,234,232,155,102,102,208,194,164,150,222,49,198,213,32,206,127,154,39,89,47,121,139,203,138,97,198,133,105,134,65,45,208,214,162,222,59,215,190,171,100,246,7,145,127,61,166,126,152,74,52,11,225,201,81,30,239,179,69,6,24,28,251,214,206,166,69,212,25,240,209,246,193,180,155,77,166,209,223,86,20,39,109,191,198,220,202,163,16,14,158,201,125,119,237,244,65,230,13,43,125,113,42,52,16,111,42,111,251,99,73,11,203,127,106,254,239,142,98,107,74,50,223,172,51,55,181,121,177,212,211,133,6,86,174,60,241,110,129,53,182,254,2,240,163,200,234,204,7,178,132,36,201,185,244,156,167,96,86,124,252,37,73,137,227,119,115,162,145,110,13,178,1,36,222,100,38,13,189,156,226,145,127,28,116,51,9,7,183,220,114,130,247,51,113,71,76,94,3,226,201,74,40,111,18,36,91,104,167,95,228,75,189,119,193,134,97,152,35,27,90,118,175,195,23,34,144,188,230,236,254,214,246,3,131,55,99,145,5,33,73,91,43,7,71,101,202,16,40,103,171,133,48,140,114,115,217,189,126,225,134,134,245,223,20,122,186,156,134,4,55,158,236,124,205,7,218,72,96,218,19,144,63,69,10,11,248,172,89,70,95,80,19,177,28,199,67,105,144,81,45,169,30,81,122,241,68,110,94,103,249,129,195,23,142,181,73,180,151,161,164,85,101,87,148,70,211,107,113,193,54,145,220,91,44,1,68,86,211,199,57,101,55,130,183,239,248,194,116,194,83,28,51,117,189,160,114,218,184,136,77,102,166,140,243,62,235,26,140,201,226,151,205,18,231,169,85,155,53,107,102,91,163,66,36,64,203,243,210,181,156,163,111,146,67,168,134,226,96,231,17,12,231,168,219,87,153,192,113,185,85,10,157,146,92,177,169,94,174,231,226,243,51,8,150,238,178,131,38,213,99,179,222,152,101,167,65,26,108,101,242,195,53,136,66,119,89,85,195,75,76,225,144,200,177,191,182,105,166,11,221,156,118,44,35,27,107,61,22,35,216,227,142,119,235,99,161,4,129,177,153,6,141,168,88,249,193,6,63,62,147,234,40,135,71,106,104,92,200,8,48,194,149,11,103,198,87,41,15,209,119,36,83,133,9,5,118,149,142,0';
const operation = sc.ContractParam.string('test01');
const args = sc.ContractParam.string(value);

(async function main() {
  // Params
  const account = Neon.create.account(privnetWif);
  const invoke = { scriptHash, operation, args };
  const intents = [];
  const gasCost = 1;

  // 
  const script = Neon.create.script(invoke);
  const client = await api.neonDB.getRPCEndpoint(localHost);
  
  // Test Response
  const response = await rpc.Query.invokeScript(script).execute(client);
  if (response.result.state === 'HALT, BREAK') console.log('yo');
})();
